# TileSummoner UI 和场景需求描述（AI生成用）

## 项目概述

**游戏名称**：TileSummoner（地块召唤师）
**引擎**：Godot 4.5.1
**语言**：GDScript
**分辨率基准**：1280×720
**UI风格**：简洁现代，暗色主题，卡片式设计

---

## 一、已实现的UI组件（参考）

### 1.1 主菜单 (`Scenes/main_menu.tscn`)
- 垂直居中布局
- 标题 "Tile Summoner" + 副标题 "地块召唤师"
- 按钮：开始游戏、设置、退出
- 版本标签

### 1.2 设置菜单 (`Scenes/ui/settings_menu.tscn`)
- 音频设置：主音量、音乐、音效滑块
- 显示设置：全屏、垂直同步复选框
- 语言选择下拉框
- 返回按钮

### 1.3 地形编辑器 (`Scenes/tile_editor.tscn`)
- 顶部栏：标题、难度选择、开始战斗、返回
- 左侧面板：地形选择区（滚动容器）
- 右侧面板：4×7网格视图
- 状态栏：准备状态、敌方难度、可用地块数

### 1.4 地形按钮组件 (`Scenes/ui/tile_palette_item.tscn`)
- 52×52图标
- 地形名称标签
- 库存数量标签
- 选中高亮效果

---

## 二、待实现的UI需求

### 2.1 角色选择界面（未实现）

**场景路径**：`Scenes/character_select.tscn`
**脚本路径**：`Scripts/ui/character_select_ui.gd`

```
┌─────────────────────────────────────────────────────────────┐
│  新游戏 - 选择角色                                           │
├─────────────────────────────────────────────────────────────┤
│                                                              │
│  ┌─────────────────┐              ┌─────────────────┐       │
│  │                 │              │                 │       │
│  │   [角色头像]    │              │   [角色头像]    │       │
│  │                 │              │                 │       │
│  │  元素师艾琳     │              │  守卫官雷恩     │       │
│  │  [初始可用]     │              │  [需解锁]       │       │
│  │  ─────────────  │              │  ─────────────  │       │
│  │  元素连锁       │              │  阵地防御       │       │
│  │  初始: 水地块×8  │              │  初始: 岩地块×8  │       │
│  │  初始: 草地块×4  │              │  初始: 草地块×4  │       │
│  │  被动: 元素共鸣  │              │  被动: 坚守阵地  │       │
│  │      "相邻同    │              │      相邻地块   │       │
│  │       系地块     │              │      召唤单位   │       │
│  │       加成"     │              │      防御+1"    │       │
│  └─────────────────┘              └─────────────────┘       │
│                                                              │
│                      [确认选择]                               │
│                                                              │
└─────────────────────────────────────────────────────────────┘
```

**UI元素**：
- 标题标签："新游戏 - 选择角色"
- 角色卡片（横向滚动，至少2个）
- 每张卡片包含：头像、名称、可用状态、技能说明、初始地块、被动技能
- 确认按钮
- 返回按钮

**交互逻辑**：
- 点击卡片选中角色（高亮边框）
- 已解锁角色可选，未锁定角色灰显
- 确认后进入初始配置界面

---

### 2.2 初始配置界面（未实现）

**场景路径**：`Scenes/initial_config.tscn`
**脚本路径**：`Scripts/ui/initial_config_ui.gd`

```
┌─────────────────────────────────────────────────────────────┐
│  新游戏 - 初始配置          (1/5轮)                          │
├─────────────────────────────────────────────────────────────┤
│                                                              │
│  选择初始地块，点击查看详情：                                 │
│                                                              │
│  ┌─────────────┐        ┌─────────────┐        ┌─────────────┐
│  │             │        │             │        │             │
│  │ [地形图标]  │        │ [地形图标]  │        │ [地形图标]  │
│  │             │        │             │        │             │
│  │  草地地块   │        │  水域地块   │        │  沙地地块   │
│  │  基础地形   │        │  基础地形   │        │  基础地形   │
│  │  ─────────  │        │  ─────────  │        │  ─────────  │
│  │  召唤:      │        │  召唤:      │        │  召唤:      │        │
│  │  战士/弓手  │        │  水元素/    │        │  流沙陷阱/  │       │
│  │  特性:      │        │  冰法师    │        │  沙虫       │       │
│  │  无        │        │  特性:      │        │  特性:      │       │
│  │            │        │  水系亲和   │        │  速度提升   │       │
│  │  [已选]    │        │            │        │            │       │
│  └─────────────┘        └─────────────┘        └─────────────┘
│        ↑选中                  未选                未选        │
│                                                              │
│  剩余轮数: 4                                                │
│                                                              │
│  ─────────────────────────────────────────────────────────   │
│  当前地块库存预览：                                          │
│  [草地×2] [水域×0] [沙地×0] 森林×0] 岩石×0] [熔岩×0]        │
│                                                              │
│                      [确认选择]                               │
│                                                              │
└─────────────────────────────────────────────────────────────┘
```

**UI元素**：
- 标题：显示当前轮次（1/5轮）
- 三张地块卡片（横向排列）
- 每张卡片：图标、名称、类型、召唤单位、特性说明
- 选中状态指示
- 剩余轮数显示
- 当前库存预览
- 确认按钮

**交互逻辑**：
- 多轮选择，每轮三选一
- 点击卡片选中，高亮显示
- 确认后进入下一轮
- 5轮后进入节点界面

---

### 2.3 节点界面（未实现）

**场景路径**：`Scenes/node_map.tscn`
**脚本路径**：`Scripts/ui/node_map_ui.gd`

```
┌─────────────────────────────────────────────────────────────┐
│  Act 1 - 第5层/15层        金币: 150    遗物: 2              │
├─────────────────────────────────────────────────────────────┤
│                                                              │
│                        [路线地图]                             │
│                           [???]                             │
│                              ↑                              │
│                    ┌──────────┴──────────┐                  │
│                 [战斗]                 [商店]                │
│                    ↑                      ↑                  │
│                [战斗] ← ─ ─ ─ ─ ─ ─ → [休息]                │
│                    ↑                                           │
│                 [当前]                                         │
│                                                              │
│  ─────────────────────────────────────────────────────────   │
│  下一层: 战斗节点                                             │
│  敌方情报: 火系生物为主，预计难度 ★★☆☆☆                      │
│                                                              │
│  [查看卡组] [查看遗物] [编辑地块配置 →]                      │
│                                                              │
│                  [前进]    [返回]                             │
│                                                              │
└─────────────────────────────────────────────────────────────┘
```

**UI元素**：
- 顶部信息栏：层数、金币、遗物数
- 中央：路线地图可视化（节点图）
- 底部操作区：卡组、遗物、地块配置按钮
- 前进/返回按钮
- 下一层预览信息

**节点类型**：
- 战斗节点：红色剑图标
- 商店节点：黄色钱袋图标
- 休息节点：绿色火苗图标
- 未知节点：紫色问号图标
- Boss节点：深红骷髅图标
- 精英节点：橙色双剑图标

**交互逻辑**：
- 点击节点移动
- 已经过的节点灰显
- 当前位置高亮
- 底部按钮打开对应弹窗

---

### 2.4 战斗前确认界面（未实现）

**场景路径**：`Scenes/battle_preview.tscn`
**脚本路径**：`Scripts/ui/battle_preview_ui.gd`

```
┌─────────────────────────────────────────────────────────────┐
│  即将进入战斗                                                 │
├─────────────────────────────────────────────────────────────┤
│                                                              │
│  敌方情报                                                    │
│  ┌─────────────────────┐  ┌─────────────────────────┐      │
│  │ 敌方地块分布         │  │ 详细情报                 │      │
│  │ ┌───┬───┬───┬───┐  │  │ • 敌方单位:               │      │
│  │ │熔 │熔 │草 │草 │  │  │   - 火元素×3              │      │
│  │ ├───┼───┼───┼───┤  │  │   - 熔岩巨人×1            │      │
│  │ │岩 │熔 │水 │草 │  │  │                           │      │
│  │ └───┴───┴───┴───┘  │  │ • 难度: ★★★☆☆            │      │
│  │                   │  │ • 预计奖励:               │      │
│  │                   │  │   - 稀有地块×1            │      │
│  └─────────────────────┘  │   - 金币 +50             │      │
│                           └─────────────────────────┘      │
│                                                              │
│  我方地块配置                                                │
│  ┌───┬───┬───┬───┬───┬───┬───┐                          │
│  │草 │草 │水 │沙 │草 │草 │草 │                          │
│  ├───┼───┼───┼───┼───┼───┼───┤                          │
│  │草 │水 │草 │草 │草 │森 │草 │                          │
│  └───┴───┴───┴───┴───┴───┴───┘                          │
│                                                              │
│  [确认进入战斗]              [返回调整地块]                   │
│                                                              │
└─────────────────────────────────────────────────────────────┘
```

**UI元素**：
- 标题标签
- 敌方情报面板（左侧：地块网格，右侧：详细情报）
- 我方地块配置预览（4×7网格）
- 确认/返回按钮

---

### 2.5 完整战斗界面（部分实现）

**场景路径**：`Scenes/battle_scene.tscn`
**脚本路径**：`Scripts/scene/battle_scene_controller.gd`

```
┌─────────────────────────────────────────────────────────────┐
│  法力: 7/10 ██████████    战斗时间: 02:15                     │
├─────────────────────────────────────────────────────────────┤
│  敌方半区                                                    │
│  [敌方基地♥♥♥♥♥]  [塔♥♥♥]  [塔♥♥♥]                          │
│       ┌───────┬───────┬───────┬───────┬───────┬───────┐    │
│       │ 熔岩  │ 熔岩  │ 草地  │ 草地  │ 草地  │ 草地  │    │
│       │ [巨]  │ [火]  │       │       │ [弓]  │       │    │
│       └───────┴───────┴───────┴───────┴───────┴───────┘    │
│       ┌───────┬───────┬───────┬───────┬───────┬───────┐    │
│       │ 岩石  │ 熔岩  │ 水域  │ 草地  │ 草地  │ 森林  │    │
│       │ [火]  │ [火]  │ [冰]  │       │       │       │    │
│       └───────┴───────┴───────┴───────┴───────┴───────┘    │
│  ───────────────── 中线 ─────────────────────────────        │
│       ┌───────┬───────┬───────┬───────┬───────┬───────┐    │
│       │ 草地  │ 草地  │ 水域  │ 沙地  │ 草地  │ 草地  │    │
│       │       │       │ [水]  │       │ [战]  │       │    │
│       └───────┴───────┴───────┴───────┴───────┴───────┘    │
│       ┌───────┬───────┬───────┬───────┬───────┬───────┐    │
│       │ 草地  │ 水域  │ 草地  │ 草地  │ 草地  │ 森林  │    │
│       │       │ [水]  │       │       │       │ [弓]  │    │
│       └───────┴───────┴───────┴───────┴───────┴───────┘    │
│  [塔♥♥♥]  [塔♥♥♥]  [我方基地♥♥♥♥♥♥]                         │
├─────────────────────────────────────────────────────────────┤
│  消耗品卡牌                            法力恢复速度: 1/秒     │
│  ┌────┐ ┌────┐ ┌────┐                  [点击地块选择召唤位置]│
│  │火球│ │冰冻│ │治疗│  法力消耗: 2      当前召唤冷却: 0.5s   │
│  │×2  │ │×1  │ │×1  │                                      │
│  └────┘ └────┘ └────┘                                      │
│  ┌────┐                                                     │
│  │护盾│                                                     │
│  │×1  │                                                     │
│  └────┘                                                     │
│                                                              │
└─────────────────────────────────────────────────────────────┘
```

**UI元素**：
- 顶部状态栏：法力值（进度条）、战斗时间
- 战斗区域：双方各4×7网格，中线分隔
- 敌方/我方基地血量、塔血量
- 底部：消耗品卡牌栏位
- 法力恢复速度、召唤冷却提示

**战斗机制（即时制）**：
- 单位自动索敌、自动攻击
- 无回合概念，实时进行
- 点击地块放置单位（有施法时间和冷却）
- 点击消耗品释放（需要法力）
- 法力自动恢复（1法力/秒）

---

### 2.6 战斗结算界面（未实现）

**场景路径**：`Scenes/battle_result.tscn`
**脚本路径**：`Scripts/ui/battle_result_ui.gd`

#### 胜利结算
```
┌─────────────────────────────────────────────────────────────┐
│                     🏆 战斗胜利！                             │
├─────────────────────────────────────────────────────────────┤
│                                                              │
│  基础奖励                                                    │
│  ┌────────────────────────────────────────────────────┐     │
│  │ 金币 +50                                              │     │
│  └────────────────────────────────────────────────────┘     │
│                                                              │
│  选择额外奖励（三选一）                                      │
│  ┌─────────────┐    ┌─────────────┐    ┌─────────────┐    │
│  │  🃏 卡牌奖励  │    │  🟫 地块奖励  │    │  💰 金币奖励  │    │
│  │             │    │             │    │             │    │
│  │  火球术×2    │    │  熔岩地块×1  │    │  +80 金币    │    │
│  │  (稀有)     │    │  (稀有)     │    │             │    │
│  └─────────────┘    └─────────────┘    └─────────────┘    │
│                                                              │
│  当前库存: 草地×10 水域×5 沙地×3 ...                         │
│                                                              │
│                      [继续前进]                               │
│                                                              │
└─────────────────────────────────────────────────────────────┘
```

#### 失败结算
```
┌─────────────────────────────────────────────────────────────┐
│                     💀 战斗失败                               │
├─────────────────────────────────────────────────────────────┤
│                                                              │
│  本次游戏统计                                                │
│  ┌────────────────────────────────────────────────────┐     │
│  │  最终层数: 第5层                                      │     │
│  │  战斗次数: 7胜 2负                                    │     │
│  │  获得金币: 350                                       │     │
│  │  解锁成就:                                           │     │
│  │    ✓ 初露锋芒（到达第5层）                            │     │
│  │    ✰ 勇者之心（到达第10层）- 未解锁                   │     │
│  └────────────────────────────────────────────────────┘     │
│                                                              │
│                      [返回主菜单]                             │
│                                                              │
└─────────────────────────────────────────────────────────────┘
```

---

### 2.7 商店界面（未实现）

**场景路径**：`Scenes/shop.tscn`
**脚本路径**：`Scripts/ui/shop_ui.gd`

```
┌─────────────────────────────────────────────────────────────┐
│  🛒 商店                                         金币: 150    │
├─────────────────────────────────────────────────────────────┤
│                                                              │
│  ┌─────────────┐                ┌─────────────┐             │
│  │  [购买]     │                │  [售卖]     │             │
│  │  当前选中   │                │             │             │
│  └─────────────┘                └─────────────┘             │
│                                                              │
│  地块商店                                                    │
│  ┌─────────┐  ┌─────────┐  ┌─────────┐  ┌─────────┐       │
│  │森林地块 │  │熔岩地块 │  │沼泽地块 │  │冰冻地块 │       │
│  │稀有     │  │稀有     │  │稀有     │  │稀有     │       │
│  │30金币   │  │40金币   │  │25金币   │  │35金币   │       │
│  │[购买]   │  │[购买]   │  │[购买]   │  │[购买]   │       │
│  └─────────┘  └─────────┘  └─────────┘  └─────────┘       │
│                                                              │
│  卡牌商店                                                    │
│  ┌─────────┐  ┌─────────┐  ┌─────────┐  ┌─────────┐       │
│  │火球术   │  │冰霜护盾 │  │治疗术   │  │连锁闪电 │       │
│  │稀有     │  │普通     │  │普通     │  │史诗     │       │
│  │45金币   │  │20金币   │  │15金币   │  │60金币   │       │
│  │[购买]   │  │[购买]   │  │[购买]   │  │[购买]   │       │
│  └─────────┘  └─────────┘  └─────────┘  └─────────┘       │
│                                                              │
│  你的库存（售卖）                                            │
│  ┌─────────┐  ┌─────────┐                                   │
│  │沼泽地块 │  │沙地地块 │  ...                              │
│  │稀有     │  │普通     │                                   │
│  │15金币   │  │10金币   │                                   │
│  │[售卖]   │  │[售卖]   │                                   │
│  └─────────┘  └─────────┘                                   │
│                                                              │
│  [刷新商店(50金币)]                  [离开商店]              │
│                                                              │
└─────────────────────────────────────────────────────────────┘
```

**UI元素**：
- 标题 + 金币显示
- 购买/售卖选项卡
- 地块商店网格（4×2或更多）
- 卡牌商店网格
- 库存售卖区
- 刷新按钮、离开按钮

---

### 2.8 休息节点界面（未实现）

**场景路径**：`Scenes/rest_node.tscn`
**脚本路径**：`Scripts/ui/rest_node_ui.gd`

```
┌─────────────────────────────────────────────────────────────┐
│  🔥 休息站                                                   │
├─────────────────────────────────────────────────────────────┤
│                                                              │
│  选择一项服务（可跳过）：                                      │
│                                                              │
│  ┌────────────────────────────────────────────────────┐     │
│  │  🔥 回复基地血量                                     │     │
│  │                                                      │     │
│  │     恢复基地30%最大生命值                             │     │
│  │     当前基地: 50/100 → 80/100                        │     │
│  │                                                      │     │
│  └────────────────────────────────────────────────────┘     │
│  ┌────────────────────────────────────────────────────┐     │
│  │  ❌ 移除地块                                         │     │
│  │                                                      │     │
│  │     从库存中永久移除一个地块                          │     │
│  │     点击选择要移除的地块                              │     │
│  │                                                      │     │
│  └────────────────────────────────────────────────────┘     │
│  ┌────────────────────────────────────────────────────┐     │
│  │  ⬆️ 升级地块                                         │     │
│  │                                                      │     │
│  │     选择一个地块提升特性等级                          │     │
│  │     当前地块: 草地(普通) → 草地(稀有)                │     │
│  │                                                      │     │
│  └────────────────────────────────────────────────────┘     │
│                                                              │
│  [跳过休息]                            [确认选择]            │
│                                                              │
└─────────────────────────────────────────────────────────────┘
```

**UI元素**：
- 标题
- 三个服务卡片（横向排列）
- 跳过按钮、确认按钮

**交互逻辑**：
- 点击卡片选中服务
- 选择"移除地块"或"升级地块"时，弹出地块选择列表
- 确认后执行对应服务

---

### 2.9 每日挑战界面（未实现）

**场景路径**：`Scenes/daily_challenge.tscn`
**脚本路径**：`Scripts/ui/daily_challenge_ui.gd`

```
┌─────────────────────────────────────────────────────────────┐
│  📅 每日挑战                                  2026-01-21     │
├─────────────────────────────────────────────────────────────┤
│                                                              │
│  今日规则                                                    │
│  ┌────────────────────────────────────────────────────┐     │
│  │  🌊 水系主宰                                         │     │
│  │                                                      │     │
│  │  • 所有水地块召唤单位生命+50%                        │     │
│  │  • 其他地形单位生命-20%                             │     │
│  │  • 商店中水系地块50%折扣                            │     │
│  │                                                      │     │
│  └────────────────────────────────────────────────────┘     │
│                                                              │
│  排行榜（今日）                                              │
│  ┌────────────────────────────────────────────────────┐     │
│  │  排名    玩家        层数    用时      基地血       │     │
│  │  ──────  ────────    ────    ──────    ───────     │     │
│  │   1      PlayerXXX    45     18:32     85%         │     │
│  │   2      HeroOne      42     22:15     60%         │     │
│  │   3      TileMaster   38     25:40     100%        │     │
│  │   ...                                                 │     │
│  └────────────────────────────────────────────────────┘     │
│                                                              │
│  你的最佳记录: 第12层（2026-01-18）                          │
│                                                              │
│                        [开始挑战]                            │
│                                                              │
│                        [返回]                                │
│                                                              │
└─────────────────────────────────────────────────────────────┘
```

---

### 2.10 查看卡组弹窗（未实现）

**场景路径**：`Scenes/ui/deck_viewer.tscn`
**脚本路径**：`Scripts/ui/deck_viewer.gd`

```
┌─────────────────────────────────────────────────────────────┐
│  你的卡组                                         [关闭]     │
├─────────────────────────────────────────────────────────────┤
│                                                              │
│  消耗品: 5张    单位卡: 12张    总计: 17张                    │
│                                                              │
│  ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐          │
│  │ 火球术   │ │ 火球术   │ │ 冰霜护盾 │ │ 治疗术   │          │
│  │ 稀有     │ │ 稀有     │ │ 普通     │ │ 普通     │          │
│  │ 消耗:2法 │ │ 消耗:2法 │ │ 消耗:1法 │ │ 消耗:1法 │          │
│  │ ×2       │ │          │ │ ×1       │ │ ×2       │          │
│  └─────────┘ └─────────┘ └─────────┘ └─────────┘          │
│  ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐          │
│  │ 战士召唤 │ │ 弓手召唤 │ │ 水元素   │ │ ...     │          │
│  │ 普通     │ │ 普通     │ │ 稀有     │ │          │          │
│  │ 消耗:2法 │ │ 消耗:2法 │ │ 消耗:3法 │ │          │          │
│  │ ×3       │ │ ×2       │ │ ×1       │ │          │          │
│  └─────────┘ └─────────┘ └─────────┘ └─────────┘          │
│                                                              │
│  [按类型筛选 ▼]  [按稀有度筛选 ▼]                            │
│                                                              │
└─────────────────────────────────────────────────────────────┘
```

---

### 2.11 查看遗物弹窗（未实现）

**场景路径**：`Scenes/ui/relic_viewer.tscn`
**脚本路径**：`Scripts/ui/relic_viewer.gd`

```
┌─────────────────────────────────────────────────────────────┐
│  你的遗物                                         [关闭]     │
├─────────────────────────────────────────────────────────────┤
│                                                              │
│  已收集: 2/??                                                │
│                                                              │
│  ┌────────────────────────────────────────────────────┐     │
│  │  🔥 火焰之心                                         │     │
│  │                                                      │     │
│  │  所有火系地块召唤单位攻击力+1                        │     │
│  │                                                      │     │
│  │  来源: Act 1 Boss                                    │     │
│  └────────────────────────────────────────────────────┘     │
│  ┌────────────────────────────────────────────────────�     │
│  │  💧 水之祝福                                           │     │
│  │                                                      │     │
│  │  每回合开始时恢复2点法力                              │     │
│  │                                                      │     │
│  │  来源: Act 1 精英                                     │     │
│  └────────────────────────────────────────────────────┘     │
│                                                              │
│                          [确定]                               │
│                                                              │
└─────────────────────────────────────────────────────────────┘
```

---

## 三、通用UI组件规范

### 3.1 按钮样式
- 主要按钮：蓝色背景，白色文字，圆角矩形
- 次要按钮：灰色背景，白色文字
- 危险按钮：红色背景
- 尺寸：最小 120×40 像素
- 悬停效果：亮度提升10%
- 点击效果：缩放95%

### 3.2 卡片样式
- 背景：深灰色面板（#2a2a2a）
- 边框：1px 浅灰色（#404040）
- 圆角：8px
- 内边距：16px
- 选中效果：蓝色边框（#4a90e2）
- 悬停效果：轻微放大（scale: 1.02）

### 3.3 标签样式
- 大标题：28px，粗体
- 中标题：20px，粗体
- 正文：16px
- 小字：12px，灰色（#888）
- 主要文字：白色（#fff）
- 次要文字：浅灰（#ccc）

### 3.4 进度条样式
- 背景：深灰色条
- 填充：渐变蓝色到青色
- 圆角：4px
- 高度：8px

### 3.5 网格样式
- 单元格尺寸：64×64 或 80×80 像素
- 边框：1px 半透明白色
- 悬停：高亮边框
- 选中：蓝色边框 + 半透明填充

### 3.6 滚动容器
- 滚动条宽度：12px
- 滚动条颜色：半透明白色
- 滚动条悬停：不透明白色

---

## 四、地形类型与图标规范

| 地形 | 图标颜色 | 图标示意 | 稀有度 |
|------|----------|----------|--------|
| 草地 | 绿色 #4caf50 | 草叶 | 普通 |
| 水域 | 蓝色 #2196f3 | 水波 | 普通 |
| 沙地 | 黄色 #ffeb3b | 沙丘 | 普通 |
| 森林 | 深绿 #2e7d32 | 树木 | 稀有 |
| 岩石 | 灰色 #757575 | 石头 | 稀有 |
| 熔岩 | 橙红 #ff5722 | 火焰 | 稀有 |
| 沼泽 | 深绿 #1b5e20 | 气泡 | 稀有 |
| 冰冻 | 青色 #00bcd4 | 雪花 | 稀有 |
| 农田 | 浅绿 #8bc34a | 麦穗 | 普通 |

---

## 五、动画与过渡效果

### 5.1 场景切换
- 淡入淡出：0.3秒
- 使用 `SceneTree.create_tween()`

### 5.2 卡片交互
- 悬停放大：0.2秒，scale 1.0 → 1.05
- 点击缩小：0.1秒，scale 1.0 → 0.95
- 使用 `Control.pivot_offset` 中心缩放

### 5.3 UI显示/隐藏
- 面板弹入：从下向上，0.2秒，ease-out
- 弹窗淡入：0.2秒
- 使用 `Tween.set_ease(Tween.EASE_OUT)`

### 5.4 战斗特效
- 单位召唤：从下方弹入，0.3秒，elastic-out
- 攻击动画：快速冲刺，0.15秒
- 伤害数字：向上飘动消失，0.5秒

---

## 六、响应式布局

### 6.1 锚点设置
- 顶部栏：`anchor_top = 0, anchor_bottom = 0`
- 底部栏：`anchor_top = 1, anchor_bottom = 1`
- 中央内容：`anchors = (0.5, 0.5, 0.5, 0.5)`
- 左侧面板：`anchor_left = 0, anchor_right = 0`
- 右侧面板：`anchor_left = 1, anchor_right = 1`

### 6.2 缩放模式
- UI容器：`expand_mode = Control.EXPAND_IGNORE_SIZE`
- 自适应字体：使用 `Theme` 或 `LabelSettings`

---

## 七、实现优先级

| 优先级 | 界面 | 复杂度 | 说明 |
|--------|------|--------|------|
| P0 | 完整战斗界面 | 高 | 核心玩法 |
| P0 | 战斗结算界面 | 中 | 游戏流程必需 |
| P0 | 节点界面 | 高 | 游戏主循环 |
| P1 | 角色选择界面 | 中 | 新游戏流程 |
| P1 | 初始配置界面 | 中 | 新游戏流程 |
| P1 | 战斗前确认界面 | 低 | 体验优化 |
| P2 | 商店界面 | 中 | 节点功能 |
| P2 | 休息界面 | 低 | 节点功能 |
| P2 | 查看卡组/遗物 | 低 | 辅助功能 |
| P3 | 每日挑战界面 | 中 | 扩展功能 |

---

## 八、AI生成提示词模板

### 8.1 生成完整UI场景

```
请使用 Godot 4.5.1 和 GDScript 为 TileSummoner 创建以下UI界面：

[界面名称]

场景路径：Scenes/[xxx].tscn
脚本路径：Scripts/ui/[xxx].gd

UI布局描述：
[从上述文档中复制对应界面的ASCII布局图]

UI元素列表：
1. [元素1] - [类型] - [尺寸] - [位置]
2. [元素2] - [类型] - [尺寸] - [位置]

交互逻辑：
1. [交互1]
2. [交互2]

样式要求：
- 遵循文档第三章的通用UI组件规范
- 暗色主题，卡片式设计
- 按钮悬停和点击效果

请生成完整的场景文件和脚本代码。
```

### 8.2 生成单个UI组件

```
请创建以下UI组件：

组件名称：[组件名]
用途：[简要说明]

子元素：
- [元素1]: [Control类型]，[尺寸]
- [元素2]: [Control类型]，[尺寸]

样式：
- 背景：[颜色]
- 边框：[样式]
- [其他样式要求]

导出：
- 场景路径：Scenes/ui/[xxx].tscn
- 脚本路径：Scripts/ui/[xxx].gd
```

---

## 九、相关文件路径汇总

### 场景文件
- `Scenes/main_menu.tscn` - 主菜单（已实现）
- `Scenes/ui/settings_menu.tscn` - 设置菜单（已实现）
- `Scenes/tile_editor.tscn` - 地形编辑器（已实现）
- `Scenes/battle_scene.tscn` - 战斗场景（部分实现）
- `Scenes/ui/tile_palette_item.tscn` - 地形按钮组件（已实现）

### 待创建场景
- `Scenes/character_select.tscn` - 角色选择
- `Scenes/initial_config.tscn` - 初始配置
- `Scenes/node_map.tscn` - 节点地图
- `Scenes/battle_preview.tscn` - 战斗前确认
- `Scenes/battle_result.tscn` - 战斗结算
- `Scenes/shop.tscn` - 商店
- `Scenes/rest_node.tscn` - 休息节点
- `Scenes/daily_challenge.tscn` - 每日挑战
- `Scenes/ui/deck_viewer.tscn` - 卡组查看
- `Scenes/ui/relic_viewer.tscn` - 遗物查看

### UI脚本
- `Scripts/ui/main_menu_ui.gd` - 主菜单控制器
- `Scripts/ui/settings_menu.gd` - 设置菜单控制器
- `Scripts/ui/tile_editor/tile_editor_ui.gd` - 地形编辑器UI
- `Scripts/ui/tile_editor/tile_palette_item.gd` - 地形按钮组件
- `Scripts/scene/scene_manager.gd` - 场景管理器
- `Scripts/scene/battle_scene_controller.gd` - 战斗场景控制器

### 设计文档
- `Docs/game_design/12_游戏流程设计_v2.md` - 详细游戏流程
- `Docs/game_design/07_UI交互设计.md` - UI设计框架
- `Docs/CODING_STANDARDS.md` - 编码规范

---

## 十、快速参考

### Godot Control 常用类型
- `VBoxContainer` - 垂直布局
- `HBoxContainer` - 水平布局
- `GridContainer` - 网格布局
- `Panel` / `PanelContainer` - 面板容器
- `Button` - 按钮
- `Label` - 文本标签
- `ProgressBar` - 进度条
- `ScrollContainer` - 滚动容器
- `TextureRect` - 图片显示
- `LineEdit` - 文本输入
- `CheckBox` - 复选框
- `OptionButton` - 下拉选择
- `HSplitContainer` / `VSplitContainer` - 分割容器

### 场景树结构示例
```
[场景根节点: Control]
├── Background (ColorRect)
├── MainContainer (VBoxContainer)
│   ├── Header (Panel)
│   │   └── TitleLabel (Label)
│   ├── ContentContainer (HSplitContainer)
│   │   ├── LeftPanel (VBoxContainer)
│   │   └── RightPanel (VBoxContainer)
│   └── Footer (Panel)
│       └── StatusLabel (Label)
└── Scripts: [ui_script].gd
```

---

*文档版本：v1.0*
*更新日期：2026-01-21*
