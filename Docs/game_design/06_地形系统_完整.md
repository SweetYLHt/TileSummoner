# 地形系统（完整版）

> **文档版本**: v1.1
> **最后更新**: 2026-01-19
> **关联文档**: [02_核心机制](./02_核心机制.md) | [05_单位系统_完整](./05_单位系统_完整.md)

---

## 1. 设计概述

### 1.1 设计原则

| 原则 | 说明 |
|------|------|
| **简洁直观** | 每种地形2-3个核心属性，易于理解记忆 |
| **特性分类** | 基础/进阶/特殊按特性复杂度划分，非稀有度 |
| **固定百分比** | 数值采用固定百分比（±10%/±20%/±50%） |
| **策略权衡** | 每种进阶/特殊地形都有明确优缺点 |

### 1.2 九种地形一览

| 地形 | 分类 | 对应词条 | 特殊效果 |
|------|------|----------|----------|
| **草地** | 基础 | 草 | 无（基准地形） |
| **水域** | 基础 | 水 | 非水词条移动力-1，溺水5%/秒 |
| **沙地** | 基础 | 地 | 非地词条移动力-1，地词条移动力+1，视野+1 |
| **岩石** | 进阶 | 金 | 防御+50%，消耗后地块保留 |
| **森林** | 进阶 | 草 | 草词条防御+20%，20%闪避，飞行无视 |
| **农田** | 特殊 | 地 | 每5秒恢复5%生命，防御-10%，草词条移动力+1 |
| **熔岩** | 特殊 | 火 | 非火词条灼烧10%/秒，火词条攻击+20% |
| **沼泽** | 特殊 | 水 | 非水词条移动力-1，水词条移动力+1，困住攻击者15% |
| **冰原** | 特殊 | 冰 | 非冰词条移动力-1，冰词条移动力+1，冻结10% |

---

## 2. 地形详解

### 2.1 草地（基础）

> **定位**: 基准地形，无任何加成或减益

| 属性 | 数值 |
|------|------|
| 分类 | 基础地形 |
| 移动影响 | 无 |
| 战斗加成 | 无 |
| 对应词条 | 草 |
| 获取方式 | 初始携带 / 商店低价 |

**战术用途**:
- 稳妥的中立地形，适合部署通用单位
- 连通性的基础保障
- 可靠的撤退路径

---

### 2.2 水域（基础）

> **定位**: 限制地形，水系主场

| 属性 | 数值 |
|------|------|
| 分类 | 基础地形 |
| 移动影响 | 非水词条移动力-1 |
| 持续效果 | 非水词条溺水5%/秒 |
| 对应词条 | 水 |
| 获取方式 | 初始携带 / 商店低价 |

**战术用途**:
- 阻碍敌方推进，形成天然防线
- 水词条单位的绝对优势区域
- 配合岩浆地形形成"水火防线"

**注意事项**:
- 溺水效果对低血量单位威胁巨大
- 飞行单位免疫所有地形效果（包括溺水）

---

### 2.3 沙地（基础）

> **定位**: 视野地形，土系主场

| 属性 | 数值 |
|------|------|
| 分类 | 基础地形 |
| 移动影响 | 非地词条移动力-1，地词条移动力+1 |
| 特殊效果 | 视野+1 |
| 对应词条 | 地 |
| 获取方式 | 初始携带 / 商店低价 |

**战术用途**:
- 前排侦察兵部署，获取视野优势
- 地词条单位的快速机动通道
- 限制敌方绕后偷袭

---

### 2.4 岩石（进阶）

> **定位**: 防御地形，可重复利用

| 属性 | 数值 |
|------|------|
| 分类 | 进阶地形 |
| 防御加成 | +50% |
| 特殊机制 | 消耗后地块保留（变为"基石"） |
| 对应词条 | 金 |
| 获取方式 | 商店中价 / 事件奖励 |

**战术用途**:
- 前排坦克单位的核心阵地
- 消耗召唤后仍保留障碍物功能
- 可作为"临时墙体"阻挡敌方推进

**特殊机制 - 基石**:
> 召唤单位后，岩石地块不消失，而是变为"基石"状态。基石不再能召唤单位，但仍保持障碍物属性，且防御加成+50%的效果对上面站立的其他单位继续生效。

---

### 2.5 森林（进阶）

> **定位**: 闪避地形，草系主场

| 属性 | 数值 |
|------|------|
| 分类 | 进阶地形 |
| 防御加成 | 草词条+20% |
| 特殊效果 | 20%闪避 |
| 无视单位 | 飞行单位免疫所有地形效果（含闪避） |
| 对应词条 | 草 |
| 获取方式 | 商店中价 / 事件奖励 |

**战术用途**:
- 草词条单位的核心防御阵地
- 高闪避单位的最佳部署位置
- 配合农田形成"草系防线"

**闪避机制**:
- 闪避效果对所有攻击类型生效（普攻/技能）
- 飞行单位免疫所有地形效果（既不会受闪避影响，也不获得闪避加成）

---

### 2.6 农田（特殊）

> **定位**: 恢复地形，攻防权衡

| 属性 | 数值 |
|------|------|
| 分类 | 特殊地形 |
| 持续效果 | 每5秒恢复5%生命 |
| 防御减益 | -10% |
| 移动加成 | 草词条移动力+1 |
| 对应词条 | 地 |
| 获取方式 | 商店中价 / 事件奖励 |

**战术用途**:
- 后排单位的持续恢复站
- 草词条单位的快速支援通道
- 攻防权衡的经典案例

**注意事项**:
- 防御减益意味着在农田上更容易被击杀
- 适合高血量单位或后排输出单位

---

### 2.7 熔岩（特殊）

> **定位**: 伤害地形，火系主场

| 属性 | 数值 |
|------|------|
| 分类 | 特殊地形 |
| 持续效果 | 非火词条灼烧10%/秒 |
| 攻击加成 | 火词条攻击+20% |
| 对应词条 | 火 |
| 获取方式 | 商店高价 / 精英层奖励 / 遗物 |

**战术用途**:
- 火词条单位的绝对输出阵地
- 快速消耗敌方低血量单位
- 配合水域形成"水火双重防线"

**灼烧机制**:
- 灼烧效果按最大生命值百分比计算
- 对高血量单位威胁更大
- 飞行单位免疫所有地形效果（包括灼烧）

---

### 2.8 沼泽（特殊）

> **定位**: 控制地形，水系主场

| 属性 | 数值 |
|------|------|
| 分类 | 特殊地形 |
| 移动影响 | 非水词条移动力-1，水词条移动力+1 |
| 特殊效果 | 困住攻击者15%（定身1秒） |
| 对应词条 | 水 |
| 获取方式 | 商店高价 / 精英层奖励 / 遗物 |

**战术用途**:
- 控制敌方近战单位的推进速度
- 水词条单位的追击优势区域
- 配合水域形成"双重水域防线"

**困住机制**:
- 敌方单位从沼泽外攻击沼泽内单位时，15%概率被定身1秒
- 定身效果不叠加，刷新持续时间
- 飞行单位免疫所有地形效果（包括困住）

---

### 2.9 冰原（特殊）

> **定位**: 减速地形，冰系主场

| 属性 | 数值 |
|------|------|
| 分类 | 特殊地形 |
| 移动影响 | 非冰词条移动力-1，冰词条移动力+1 |
| 特殊效果 | 冻结10%（定身1.5秒） |
| 对应词条 | 冰 |
| 获取方式 | 商店高价 / 精英层奖励 / 遗物 |

**战术用途**:
- 限制敌方单位机动性
- 冰词条单位的快速推进通道
- 配合其他地形形成减速防线

**冻结机制**:
- 敌方单位进入冰原时，10%概率被冻结1.5秒
- 冻结期间单位无法移动、攻击或使用技能
- 飞行单位免疫所有地形效果（包括冻结）

---

## 3. 单位词条与地块交互系统

### 3.1 单位元素词条（8种）

| 词条 | 对应地块 | 描述 |
|------|----------|------|
| **地** | 农田、沙地 | 土系相关单位 |
| **风** | （暂无对应地块） | 机动性相关单位 |
| **水** | 水域、沼泽 | 水系相关单位 |
| **火** | 熔岩 | 火系相关单位 |
| **草** | 草地、森林 | 草系相关单位 |
| **金** | 岩石 | 金系相关单位 |
| **冰** | 冰原 | 冰系相关单位 |
| **通用** | （无对应地块） | 无明显加成减益 |

### 3.2 交互档位（7档）

| 档位 | 加成效果 | 说明 |
|------|----------|------|
| **+50%** | 极大优势 | 单位词条与地块完全匹配的特殊情况 |
| **+20%** | 主场优势 | 单位词条对应的地块 |
| **+10%** | 友好环境 | 单位词条与地块相容 |
| **0** | 中立 | 无加成减益 |
| **-10%** | 轻微不利 | 单位词条与地块不兼容 |
| **-20%** | 明显不利 | 单位词条与地块对立 |
| **-50%** | 极端克制 | 单位词条与地块严重冲突 |

> **伤害效果独立计算**：地形特殊效果（灼烧/溺水/冻结/困住等）的伤害单独计算，不在属性加成档位中。

### 3.3 交互矩阵

| 单位词条 | 草地 | 水域 | 沙地 | 岩石 | 森林 | 农田 | 熔岩 | 沼泽 | 冰原 |
|----------|:----:|:----:|:----:|:----:|:----:|:----:|:----:|:----:|:----:|
| **地** | 0 | -10% | +20% | +10% | -10% | +20% | -20% | -10% | -10% |
| **风** | +10% | -10% | +10% | +10% | +20% | +10% | -20% | -10% | -20% |
| **水** | -10% | +20% | -10% | -10% | -10% | -10% | -50% | +20% | -20% |
| **火** | 0 | -50% | -10% | -10% | -20% | -10% | +20% | -20% | -20% |
| **草** | +20% | -10% | -10% | -10% | +20% | +20% | -20% | -10% | -10% |
| **金** | +10% | -10% | +10% | +20% | -10% | +10% | -10% | -10% | -10% |
| **冰** | 0 | -20% | -10% | -10% | -10% | -10% | -50% | -10% | +20% |
| **通用** | 0 | -10% | 0 | 0 | 0 | 0 | -20% | -10% | -10% |

> **说明**：
> - **+20%**（粗体）：单位词条对应的地块主场
> - **+50%**：极端克制反转（暂未在矩阵中体现，预留扩展）
> - 通用词条对所有地块保持中立或轻微不利

### 3.4 亲和效果生效范围

地形亲和加成适用于：
- 攻击力
- 防御力
- 移动力（在已有移动影响的基础上叠加）

---

## 4. 地形配置双层机制

### 4.1 大局与小局

```
┌─────────────────────────────────────────────────────────┐
│  大局（Roguelike）                                       │
│  ├─ 地块库存：跨小局累积，永久保留                       │
│  ├─ 商店购买：消耗金币，添加到库存                       │
│  ├─ 事件奖励：获得稀有地块                               │
│  └─ 遗物效果：被动加成或主动改造                         │
├─────────────────────────────────────────────────────────┤
│  小局（战斗）                                            │
│  ├─ 战场配置：从库存选择地块，部署到控制区               │
│  ├─ 地块消耗：召唤单位后本场消失                         │
│  └─ 卡牌改造：临时改变地块属性（本场有效）               │
├─────────────────────────────────────────────────────────┤
│  小局结束                                                │
│  └─ 地块恢复：消耗的地块恢复，大局库存不变               │
└─────────────────────────────────────────────────────────┘
```

### 4.2 配置流程

1. **战斗开始前**：从地块库存中选择地块，部署到我方控制区
2. **战斗中**：
   - 消耗地块召唤单位（本场该地块消失）
   - 使用卡牌临时改造地块（本场有效）
3. **战斗结束**：
   - 消耗的地块恢复
   - 卡牌改造效果消失
   - 大局地块库存不变

### 4.3 岩石地形的特殊机制

岩石地形消耗后不消失，而是变为"基石"状态：
- 基石无法再次召唤单位
- 基石仍保持障碍物属性
- 基石上的防御加成对其他单位继续生效

---

## 5. 地形交互规则（预留扩展）

### 5.1 当前状态

**版本 1.0**: 地形之间暂无交互效果。

每种地形的效果独立生效，不会与相邻地形产生组合效果。

### 5.2 预留扩展方向

未来可考虑的交互效果（待设计评审）：

| 交互类型 | 示例 | 状态 |
|----------|------|------|
| 相邻加成 | 水域+冰原 → 形成"冰面"，移动力额外-1 | 待定 |
| 组合召唤 | 熔岩+水域相邻 → 可召唤"蒸汽"单位 | 待定 |
| 连锁反应 | 森林+熔岩相邻 → 森林燃烧变为荒地 | 待定 |

---

## 6. 地形编辑机制

### 6.1 编辑方式汇总

| 方式 | 来源 | 效果范围 | 消耗 |
|------|------|----------|------|
| **商店购买** | 局外金币 | 大局库存 | 金币 |
| **事件奖励** | 层间事件 | 大局库存 | 无 |
| **遗物效果** | 装备遗物 | 大局/小局 | 装备位 |
| **卡牌技能** | 打出法术卡 | 小局临时 | 法力值 |

### 6.2 地块可消耗性

所有地形（包括岩石）都可用于召唤单位：
- **普通地块**: 消耗后变为"虚空"，本场无法再使用
- **岩石地块**: 消耗后变为"基石"，保留障碍物功能

### 6.3 临时改造机制

通过法术卡可以临时改变地块属性：
- 改造效果仅本场战斗有效
- 战斗结束后恢复原地形
- 改造后的地块仍可正常消耗召唤

---

## 7. 设计总结

### 7.1 核心设计理念

1. **简洁直观**: 每种地形2-3个核心属性，易于记忆和理解
2. **策略权衡**: 进阶和特殊地形都有明确优缺点，需要策略选择
3. **单位绑定**: 每种地形都有对应的主场单位，形成战术流派
4. **渐进复杂度**: 基础→进阶→特殊，难度和复杂度递增

### 7.2 平衡性考量

| 方面 | 设计 |
|------|------|
| 基础地形 | 无明显优缺点，适合通用战术 |
| 进阶地形 | 攻防分明，有战术价值但无碾压效果 |
| 特殊地形 | 效果强大但伴随风险，需要策略搭配 |
| 亲和加成 | 最大±50%，避免极端克制导致无解局面 |

---

## 8. 变更记录

| 版本 | 日期 | 变更内容 |
|------|------|----------|
| v0.1 | 2026-01-17 | 创建框架文件 |
| v1.0 | 2026-01-19 | 填充完整内容：九种地形、亲和系统、双层机制 |
| v1.1 | 2026-01-19 | **文档统一修改**：①更新为8种单位元素词条；②地块与词条对应关系；③7档交互档位；④飞行单位免疫所有地形效果 |

---

*本文档基于 [02_核心机制](./02_核心机制.md) 展开，详细设计地形系统*
